@model Site.Models.POSViewModel

@{
    ViewBag.Title = "Index";
    var first = Guid.NewGuid();
    var second = Guid.NewGuid();
}

<h2>Point of Sale</h2>

<p>
    Search: <input type="text" id="myInput" onkeyup="filterTable()" name="SearchString">
</p>


<table class="table" id="tableContent">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Items[0].Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items[0].Price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Items[0].Component)
        </th>
        <th>
            Quantity
        </th>
    </tr>
    @using (Html.BeginForm(new { action = "Index", controller = "POS" }))
    {
        foreach (var item in Model.Items)
        {
            //@Model.Add(item.ID, 0);
            <tr id="mainTR">
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Price)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Component)
                </td>


                @if (item.Quantity > 0)
                {
                    <td>
                        <select id="@item.Name*Dropdown" name="@item.Name*Dropdown" onchange="addToDictionary(@item.ID, this.Value)">
                            @for (int i = 0; i <= item.Quantity; i++)
                            {
                                <option value="@item.ID">@i</option>
                            }
                        </select>
                    </td>
                }
                else
                {
                    <td>n/a</td>
                }

            </tr>
        }

        <p>
            <input type="submit" value="Submit" />
        </p>
    }


</table>


@section Scripts
{
    <script type="text/javascript">
        function filterTable() {
            // Declare variables
            var input, filterInput, table, tr, td, i, txtValue;
            input = document.getElementById("myInput");
            category = document.getElementById("myCategory")
            filterInput = input.value.toUpperCase();
            table = document.getElementById("tableContent");
            tr = table.getElementsByTagName("tr");
            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
                td = tr[i].getElementsByTagName("td")[0];
                td2 = tr[i].getElementsByTagName("td")[3];

                // Check search query
                if (td) {
                    txtValue = td.textContent || td.innerText;
                    if (txtValue.toUpperCase().indexOf(filterInput) > -1) {
                        tr[i].style.display = "";
                    }
                    else {
                        tr[i].style.display = "none";
                    }
                }



            }
        }

    </script>

}